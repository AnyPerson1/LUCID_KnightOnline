<UserControl x:Class="LUCID.Controls.MacroItemControl"
             xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:LUCID.ViewModels"
             mc:Ignorable="d" d:DesignWidth="600" d:DesignHeight="48"
             x:DataType="vm:MacroItemViewModel">

    <UserControl.Styles>
        <!-- Modern Animated CheckBox Style -->
        <Style Selector="CheckBox.ModernToggle">
            <Setter Property="Template">
                <ControlTemplate>
                    <Grid ColumnDefinitions="Auto,*">
                        <!-- Toggle Switch Container -->
                        <Border Grid.Column="0"
                                Name="SwitchBorder"
                                Width="36"
                                Height="20"
                                CornerRadius="10"
                                Background="#2A2A2A"
                                BorderBrush="#404040"
                                BorderThickness="1"
                                Cursor="Hand"
                                VerticalAlignment="Center">
                            <!-- Toggle Circle -->
                            <Ellipse Name="ToggleCircle"
                                     Width="14"
                                     Height="14"
                                     Fill="#606060"
                                     HorizontalAlignment="Left"
                                     VerticalAlignment="Center"
                                     Margin="2,0,0,0">
                                <Ellipse.Transitions>
                                    <Transitions>
                                        <ThicknessTransition Property="Margin" Duration="0:0:0.2" Easing="CubicEaseOut"/>
                                        <BrushTransition Property="Fill" Duration="0:0:0.2"/>
                                    </Transitions>
                                </Ellipse.Transitions>
                            </Ellipse>
                        </Border>
                        
                        <!-- Content -->
                        <ContentPresenter Grid.Column="1"
                                          Name="PART_ContentPresenter"
                                          Content="{TemplateBinding Content}"
                                          Margin="6,0,0,0"
                                          VerticalAlignment="Center"/>
                    </Grid>
                </ControlTemplate>
            </Setter>
        </Style>

        <!-- CheckBox Checked State -->
        <Style Selector="CheckBox.ModernToggle:checked /template/ Border#SwitchBorder">
            <Setter Property="Background" Value="{StaticResource PrimaryBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
        </Style>
        
        <Style Selector="CheckBox.ModernToggle:checked /template/ Ellipse#ToggleCircle">
            <Setter Property="Fill" Value="White"/>
            <Setter Property="Margin" Value="18,0,0,0"/>
        </Style>

        <!-- Hover Effects -->
        <Style Selector="CheckBox.ModernToggle:pointerover /template/ Border#SwitchBorder">
            <Setter Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
        </Style>

        <!-- Modern NumericUpDown Style -->
        <Style Selector="NumericUpDown.ModernNumeric">
            <Setter Property="Template">
                <ControlTemplate>
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="{TemplateBinding CornerRadius}"
                            VerticalAlignment="Center"
                            >
                        <Grid ColumnDefinitions="*,Auto" VerticalAlignment="Center">
                            <!-- Text Input -->
                            <TextBox Name="PART_TextBox"
                                     Grid.Column="0"
                                     Background="Transparent"
                                     BorderThickness="0"
                                     Padding="6,2"
                                     Margin="5,0,5,0"
                                     Width="10"
                                     FontSize="14"
                                     Foreground="{TemplateBinding Foreground}"
                                     HorizontalContentAlignment="Center"
                                     VerticalContentAlignment="Center"
                                     VerticalAlignment="Center"/>
                            
                            <!-- Up/Down Buttons -->
                            <StackPanel Grid.Column="1" Width="24" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <Button Name="PART_UpButton"
                                        Height="13"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        Content="▲"
                                        FontSize="12"
                                        Width="20"
                                        Foreground="{StaticResource TextSecondary}"
                                        Padding="0,0,0,0"
                                        Cursor="Hand"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center">
                                    <Button.Styles>
                                        <Style Selector="Button:pointerover">
                                            <Setter Property="Background" Value="{StaticResource SecondaryHoverBrush}"/>
                                            <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}"/>
                                        </Style>
                                    </Button.Styles>
                                </Button>
                                <Button Name="PART_DownButton"
                                        Height="13"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        Content="▼"
                                        Width="20"
                                        FontSize="12"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Foreground="{StaticResource TextSecondary}"
                                        Padding="0,0,0,0"
                                        Cursor="Hand">
                                    <Button.Styles>
                                        <Style Selector="Button:pointerover">
                                            <Setter Property="Background" Value="{StaticResource SecondaryHoverBrush}"/>
                                            <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}"/>
                                        </Style>
                                    </Button.Styles>
                                </Button>
                            </StackPanel>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter>
        </Style>

        <!-- Modern Button Style -->
        <Style Selector="Button.ModernKey">
            <Setter Property="Background" Value="{StaticResource BackgroundTertiary}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Transitions">
                <Transitions>
                    <BrushTransition Property="Background" Duration="0:0:0.15"/>
                    <BrushTransition Property="BorderBrush" Duration="0:0:0.15"/>
                </Transitions>
            </Setter>
        </Style>
        
        <Style Selector="Button.ModernKey:pointerover">
            <Setter Property="Background" Value="{StaticResource SecondaryHoverBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
        </Style>
    </UserControl.Styles>

    <Border Name="MainBorder"
            Background="Transparent" 
            BorderBrush="Transparent" 
            BorderThickness="1" 
            CornerRadius="8" 
            Padding="12,8"
            Margin="0,0,0,6"
            MinHeight="60"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Center">
        
        <Grid ColumnDefinitions="Auto,*,Auto" VerticalAlignment="Center">
            
            <!-- Modern Toggle Switch -->
            <StackPanel Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Center" Spacing="2">
                <CheckBox Name="MacroCheckbox"
                          Classes="ModernToggle"
                          VerticalAlignment="Center"
                          HorizontalAlignment="Center"
                          ToolTip.Tip="Makroyu Aktif Et / Devre Dışı Bırak"/>
            </StackPanel>

            <!-- Makro Bilgileri -->
            <StackPanel Grid.Column="1" 
                        VerticalAlignment="Center" 
                        HorizontalAlignment="Left"
                        Spacing="2"
                        Margin="16,0,12,0">
                <TextBlock Name="MacroName"
                           Text= "{Binding macroHeader }"
                           FontSize="13"
                           FontWeight="SemiBold"
                           Foreground="{StaticResource PrimaryBrush}" 
                           TextTrimming="CharacterEllipsis"
                           VerticalAlignment="Center"/>
                <TextBlock Name="MacroDescription"
                           Text="{Binding macroDescription}"
                           FontSize="10"
                           Foreground="{StaticResource TextSecondary}"
                           TextTrimming="CharacterEllipsis"
                           VerticalAlignment="Center"/>
            </StackPanel>

            <!-- Kontrol Grubu -->
            <StackPanel Grid.Column="2"
                        Orientation="Horizontal"
                        Spacing="8"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Center">
                
                <!-- Hız Ayarı -->
                <StackPanel Spacing="2" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="Hız"
                               FontSize="8"
                               Foreground="{StaticResource TextSecondary}"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                    <NumericUpDown Name="SpeedMs"
                                   Classes="ModernNumeric"
                                   Value="{Binding macroSpeed}"
                                   Minimum="50"
                                   Maximum="5000"
                                   Increment="50"
                                   Width="80"
                                   Height="26"
                                   FontSize="11"
                                   Background="{StaticResource BackgroundTertiary}"
                                   BorderBrush="{StaticResource BorderBrush}"
                                   BorderThickness="1"
                                   CornerRadius="4"
                                   Foreground="{StaticResource TextPrimary}"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Center"
                                   ToolTip.Tip="Makro Hızı (ms)"/>
                </StackPanel>
                
                <!-- Tuş Ataması -->
                <StackPanel Spacing="2" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="Tuş"
                               FontSize="8"
                               Foreground="{StaticResource TextSecondary}"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                    <Button Name="KeyAssignButton"
                            Classes="ModernKey"
                            Content="{Binding macroHotkey}"
                            Width="80"
                            Height="26"
                            FontSize="11"
                            FontWeight="SemiBold"
                            BorderThickness="1"
                            CornerRadius="4"
                            Cursor="Hand"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Center"
                            ToolTip.Tip="Tuş Ata"/>
                </StackPanel>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>